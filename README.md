# Timosocial
Timosocial，个人第一个前后端都是自己写的项目，支持动态分享、点赞、用户注册、登录、好友关注、
修改个人信息、用户搜索、在线聊天室基本功能。

## 在线演示
	[在线演示](http://139.196.224.17:7878/)
# Timosocial
Timosocial，个人第一个前后端都是自己写的项目，支持动态分享、点赞、用户注册、登录、好友关注、
修改个人信息、用户搜索、在线聊天室基本功能。

## 在线演示
	[在线演示](http://139.196.224.17:7878/)
### 2022.1.25 UPDATE:
  新增使用accessToken与refreshToken一起使用的功能，并且无感刷新token(?存疑），chrome浏览器已能过访问
由于本人很菜，虽然使用了jwt鉴权，并把token放在了cookie了。但是由于基于chromium的浏览器由于same-site的关系，放在cookie里的token是不会被浏览器接受的，使用chrome浏览器是没法登录的（cookie浏览器不接受，token也发不出去，鉴权失败），在koa里设定sameSite: "none"也没用。。而且最新的chrome也没有办法关闭这个same-site相关的设定了。但经过测试，firefox浏览器暂时可行，故推荐使用firefox浏览器。
两个账号： jane@gmail.com，john@gmail.com，密码均为12345678

## 依赖安装
`npm install`

## 使用技术栈
前端使用react+react-router，后端使用koa搭配mysql数据库，利用socket.io实现聊天室相关功能。

## 踩坑与感想
1. koa很多中间件有一定时间没有维护，后续考虑转用express框架，中间件由官方维护。
2. react的状态管理方法，一开始想用redux来管理用户状态，但是这个简单的app只用保持一个用户状态，因此使用useContext+useReducer的方案似乎更好一点。
3. nginx配置，里面也一坨需要学习的东西.....
4. useEffect使用要谨慎....一个useEffect不要发很多网络请求，但是拆分后似乎也挺乱的。。可能还是写代码不熟

## TODO
1. 发送站内信，类似于b站的私信？应该也是用socket.io实现。
2. 动态支持添加标签（接口已完成？）、动态评论，评论也支持被评论、点赞（？套娃...）。
3. 音频、视频分享。
4. 性能优化，现在后端存图片时直接存的图，因此图很多的时候首次加载很慢，体验很差啊...后端考虑对图片进行压缩，然后在存起来。前端考虑懒加载、cdn？。。


## 依赖安装
`npm install`

## 使用技术栈
前端使用react+react-router，后端使用koa搭配mysql数据库，利用socket.io实现聊天室相关功能。

## 踩坑与感想
1. koa很多中间件有一定时间没有维护，后续考虑转用express框架，中间件由官方维护。
2. react的状态管理方法，一开始想用redux来管理用户状态，但是这个简单的app只用保持一个用户状态，因此使用useContext+useReducer的方案似乎更好一点。
3. nginx配置，里面也一坨需要学习的东西.....
4. useEffect使用要谨慎....一个useEffect不要发很多网络请求，但是拆分后似乎也挺乱的。。可能还是写代码不熟

## TODO
1. 发送站内信，类似于b站的私信？应该也是用socket.io实现。
2. 动态支持添加标签（接口已完成？）、动态评论，评论也支持被评论、点赞（？套娃...）。
3. 音频、视频分享。
4. 性能优化，现在后端存图片时直接存的图，因此图很多的时候首次加载很慢，体验很差啊...后端考虑对图片进行压缩，然后在存起来。前端考虑懒加载、cdn？。。
